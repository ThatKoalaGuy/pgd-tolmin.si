---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Aktualno | PGD Tolmin">
	<div class="flex justify-center items-center px-4 min-h-[calc(100vh-5rem)]">
		<div id="fb-root"></div>
		<script
			async
			defer
			crossorigin="anonymous"
			src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v24.0&appId=1273225781224083"
		></script>

		<div id="fb-outer" class="py-10 w-full max-w-[500px]">
			<div id="fb-wrap" class="w-full">
				<div
					id="fb-page"
					class="fb-page w-full"
					data-href="https://www.facebook.com/pgd.tolmin"
					data-tabs="timeline"
					data-width=""
					data-height="900"
					data-small-header="false"
					data-adapt-container-width="true"
					data-hide-cover="false"
					data-show-facepile="true"
				>
					<blockquote
						cite="https://www.facebook.com/pgd.tolmin"
						class="fb-xfbml-parse-ignore"
					>
						<a href="https://www.facebook.com/pgd.tolmin">PGD Tolmin</a>
					</blockquote>
				</div>
			</div>
		</div>
	</div>

	<script is:inline>
		(() => {
			const nav = document.querySelector('nav');
			const banner = document.getElementById('emergency-banner');
			const outer = document.getElementById('fb-outer');
			const fbWrap = document.getElementById('fb-wrap');
			const fbPage = document.getElementById('fb-page');

			function availableHeight() {
				const vh = window.innerHeight;
				const navH = nav?.offsetHeight || 0;
				const bannerH = banner?.offsetHeight || 0;
				const cs = outer ? getComputedStyle(outer) : null;
				const pTop = cs ? parseFloat(cs.paddingTop) : 0;
				const pBottom = cs ? parseFloat(cs.paddingBottom) : 0;
				return Math.max(200, Math.floor(vh - navH - bannerH - pTop - pBottom));
			}

			function renderFB() {
				const h = availableHeight();
				const containerWidth = fbWrap?.offsetWidth || 500;
				const width = Math.min(containerWidth, 500);

				if (fbPage) {
					fbPage.setAttribute('data-height', String(h));
					fbPage.setAttribute('data-width', String(width));
				}
				if (window.FB?.XFBML?.parse) {
					window.FB.XFBML.parse(fbWrap);
				}
			}

			window.fbAsyncInit = function () {
				renderFB();
			};

			document.addEventListener('DOMContentLoaded', renderFB);
			let t;
			window.addEventListener('resize', () => {
				clearTimeout(t);
				t = setTimeout(renderFB, 150);
			});
		})();
	</script>
</Layout>
