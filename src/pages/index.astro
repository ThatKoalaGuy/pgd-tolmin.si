---
import '../styles/global.css';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';

import { Image } from 'astro:assets';
import gd from '../images/gd.jpg';
import qrCode from '../images/qr-code.png';
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>PGD Tolmin</title>
	</head>
	<body class="m-0 overflow-x-hidden">
		<main class="p-0">
			<section class="relative h-svh overflow-hidden">
				<!-- Navbar overlay -->
				<div class="absolute inset-x-0 top-0 z-50">
					<Navbar />
				</div>

				<!-- Full-bleed hero image -->
				<Image
					src={gd}
					alt="GD"
					class="block w-full h-full object-cover rounded-none shadow-none"
					widths={[640, 768, 1024, 1280, 1536]}
					sizes="100vw"
				/>

				<!-- Uniform overlay over the entire image -->
				<div class="absolute inset-0 bg-black/30 z-30 pointer-events-none">
				</div>

				<!-- Headings overlay -->
				<div class="absolute inset-0 z-40 flex items-center justify-center">
					<div class="text-center px-4">
						<h1
							class="m-0 text-white text-6xl md:text-8xl font-bold drop-shadow-lg"
						>
							PGD Tolmin
						</h1>
						<h2 class="m-0 mt-3 text-white text-3xl md:text-4xl drop-shadow">
							Tukaj - za vas.
						</h2>
					</div>
				</div>

				<!-- QR Code Blob - Bottom Left -->
				<div
					class="absolute z-40 mb-8"
					style="left: max(1rem, env(safe-area-inset-left)); bottom: max(1rem, env(safe-area-inset-bottom));"
				>
					<div class="relative w-48 sm:w-64 md:w-72 group">
						<!-- Blob background -->
						<div
							class="absolute inset-0 bg-red-600 rounded-full blur-2xl opacity-60 scale-110"
						>
						</div>

						<!-- QR Code container -->
						<div
							class="relative bg-white/95 backdrop-blur-sm rounded-3xl px-4 py-2.5 sm:px-5 sm:py-3 shadow-2xl"
						>
							<p
								class="text-center text-xs md:text-sm font-medium text-gray-700 mb-2"
							>
								Podprite nas in namenite 1% dohodnine PGD Tolmin! <br />
								Poi≈°ƒçite nas pod davƒçno ≈°tevilko
								<b
									id="copy-tax-number"
									class="text-lg sm:text-xl hover:text-red-600 cursor-pointer transition-colors inline-flex items-center gap-1"
									title="Klikni za kopiranje"
								>
									19599056
									<svg
										xmlns="http://www.w3.org/2000/svg"
										class="h-4 w-4"
										viewBox="0 0 24 24"
										fill="none"
										stroke="currentColor"
										stroke-width="2"
									>
										<rect x="9" y="9" width="13" height="13" rx="2" ry="2"
										></rect>
										<path
											d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"
										></path>
									</svg>
								</b>
								<span
									id="copy-feedback"
									class="text-xs text-green-600 ml-1 hidden"
								>
									‚úì Kopirano!
								</span>
							</p>
							<a
								href="https://edavki.durs.si/edavkiportal/OpenPortal/CommonPages/Opdynp/PageD.aspx?category=namenitev_dela_dohodnine_fo"
								target="_blank"
								class="block transition-transform hover:scale-105"
							>
								<div class="flex justify-center">
									<Image
										src={qrCode}
										alt="QR Code"
										class="w-28 sm:w-36 md:w-40 h-auto"
									/>
								</div>
								<p
									class="text-center text-sm text-gray-600 mt-2 group-hover:text-red-600 transition-colors"
								>
									üëÜ Klikni za oddajo
								</p>
							</a>
						</div>
					</div>
				</div>
			</section>
		</main>
		<Footer />

		<script>
			document
				.getElementById('copy-tax-number')
				?.addEventListener('click', async () => {
					try {
						await navigator.clipboard.writeText('19599056');
						const feedback = document.getElementById('copy-feedback');
						feedback?.classList.remove('hidden');
						setTimeout(() => {
							feedback?.classList.add('hidden');
						}, 2000);
					} catch (err) {
						console.error('Failed to copy:', err);
					}
				});
		</script>
	</body>
</html>
